# tts_voice_plugin - 配置文件
# 统一TTS语音合成插件，整合AI Voice、GSV2P、GPT-SoVITS、豆包语音、CosyVoice五种后端引擎，提供灵活的语音合成能力。
# 配置版本: 3.2.0

# 插件基本配置
[plugin]

# 是否启用插件
enabled = true

# 配置文件版本
config_version = "3.2.0"


# 通用设置
[general]

# 默认TTS后端 (ai_voice/gsv2p/gpt_sovits/doubao/cosyvoice)
default_backend = "gsv2p"

# 请求超时时间（秒）
timeout = 60

# 最大文本长度（该限制会在调用LLM时注入到prompt中，让LLM直接生成符合长度的回复，而不是被动截断）
max_text_length = 200

# 是否使用replyer润色语音内容
use_replyer_rewrite = true

# 音频文件输出目录（支持相对路径和绝对路径，留空使用项目根目录）
audio_output_dir = ""

# 是否使用base64编码发送音频
use_base64_audio = true

# 是否分段发送语音（长文本自动分割成句子逐句发送）
split_sentences = true

# 分段发送间隔时间（秒）
split_delay = 0.3


# 组件启用控制
[components]

# 是否启用Action组件
action_enabled = true

# 是否启用Command组件
command_enabled = true


# 概率控制配置
[probability]

# 是否启用概率控制
enabled = false

# 基础触发概率
base_probability = 1

# 关键词强制触发
keyword_force_trigger = true

# 强制触发关键词
force_keywords = ["一定要用语音", "必须语音", "语音回复我", "务必用语音"]


# AI Voice后端配置
[ai_voice]

# 默认AI语音音色
default_character = "邻家小妹"

# 音色别名映射（别名 -> lucy-voice-xxx）
[ai_voice.alias_map]
小新 = "lucy-voice-laibixiaoxin"
猴哥 = "lucy-voice-houge"
四郎 = "lucy-voice-silang"
东北老妹儿 = "lucy-voice-guangdong-f1"
广西大表哥 = "lucy-voice-guangxi-m1"
妲己 = "lucy-voice-daji"
霸道总裁 = "lucy-voice-lizeyan"
酥心御姐 = "lucy-voice-suxinjiejie"
说书先生 = "lucy-voice-m8"
憨憨小弟 = "lucy-voice-male1"
憨厚老哥 = "lucy-voice-male3"
吕布 = "lucy-voice-lvbu"
元气少女 = "lucy-voice-xueling"
文艺少女 = "lucy-voice-f37"
磁性大叔 = "lucy-voice-male2"
邻家小妹 = "lucy-voice-female1"
低沉男声 = "lucy-voice-m14"
傲娇少女 = "lucy-voice-f38"
爹系男友 = "lucy-voice-m101"
暖心姐姐 = "lucy-voice-female2"
温柔妹妹 = "lucy-voice-f36"
书香少女 = "lucy-voice-f34"


# GSV2P后端配置
[gsv2p]

# GSV2P API地址
api_url = "https://gsv2p.acgnai.top/v1/audio/speech"

# API认证Token
api_token = ""

# 默认音色
default_voice = "原神-中文-派蒙_ZH"

# API请求超时（秒）
timeout = 60

# TTS模型
model = "tts-v4"

# 音频格式
response_format = "mp3"

# 语音速度
speed = 1.0


# GPT-SoVITS后端配置
[gpt_sovits]

# GPT-SoVITS服务地址
server = "https://127.0.0.1:9880"

# 语音风格配置（可添加多个风格）
# 每个风格需要配置：
#   - refer_wav: 参考音频路径（必填）
#   - prompt_text: 参考文本（必填）
#   - prompt_language: 参考语言 zh/en/ja（可选，默认zh）
#   - gpt_weights: GPT模型权重路径（可选，用于动态切换模型）
#   - sovits_weights: SoVITS模型权重路径（可选，用于动态切换模型）

[gpt_sovits.styles.default]
refer_wav = "/workspace/gpt-sovits/嘉然/啊，不可以，太贪心了，贪心和真心你们选一个吧.wav"
prompt_text = "啊，不可以，太贪心了，贪心和真心你们选一个吧"
prompt_language = "zh"
# GPT模型权重路径（可选，配置后会在使用该风格时自动切换模型）
gpt_weights = "/workspace/gpt-sovits/嘉然/嘉然GPT.ckpt"
# SoVITS模型权重路径（可选，配置后会在使用该风格时自动切换模型）
sovits_weights = "/workspace/gpt-sovits/嘉然/嘉然SoVITS.pth"

# 可以添加更多风格，例如：
[gpt_sovits.styles.happy]
refer_wav = "/workspace/gpt-sovits/v4/可莉_ZH/reference_audios/中文/emotions/【默认】玩得太开心，忘、忘在脑后了….wav"
prompt_text = "玩得太开心，忘、忘在脑后了…"
prompt_language = "zh"
gpt_weights = "/workspace/gpt-sovits/v4/可莉_ZH/可莉_ZH-e10.ckpt"
sovits_weights = "/workspace/gpt-sovits/v4/可莉_ZH/可莉_ZH_e10_s530_l32.pth"


# 豆包语音后端配置
[doubao]

# 豆包语音API地址
api_url = "https://openspeech.bytedance.com/api/v3/tts/unidirectional"

# 豆包APP ID
app_id = ""

# 豆包Access Key
access_key = ""

# 豆包Resource ID
resource_id = ""

# 默认音色
default_voice = ""

# API请求超时（秒）
timeout = 60

# 音频格式
audio_format = "mp3"

# 采样率
sample_rate = 24000

# 比特率
bitrate = 128000

# 语音速度（可选）
# speed = 1.0

# 音量（可选）
# volume = 1.0

# 上下文辅助文本（可选，仅豆包2.0模型）
# context_texts = []


# CosyVoice后端配置
[cosyvoice]

# Gradio API地址
gradio_url = "https://funaudiollm-fun-cosyvoice3-0-5b.ms.show/"

# 推理模式（3s极速复刻/自然语言控制）
default_mode = "3s极速复刻"

# 默认指令（只有自然语言控制模式才会生效，3s极速复刻模式下instruct不生效）
default_instruct = "You are a helpful assistant. 请用山东话表达。<|endofprompt|>"

# 参考音频路径
reference_audio = "/home/ubuntu/maimai/MaiBot/plugins/tts_voice_plugin/test.wav"

# 提示文本
prompt_text = "不过我当下就去解决了，还行。因为我如果看到有灰尘的话，我不去清理，这样他待在那里的话，我就会特别难受。"

# API请求超时（秒）
timeout = 300

# 音频格式
audio_format = "wav"
